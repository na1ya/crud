apiVersion: apps/v1
kind: Deployment
metadata:
  name: python-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: python-app
  template:
    metadata:
      labels:
        app: python-app
    spec:
      containers:
        - name: python-app
          image: 864899851722.dkr.ecr.eu-west-2.amazonaws.com/private/pthon-app:$IMAGE_TAG
          ports:
            - containerPort: 5010
      imagePullSecrets:
        - name: aws-ecr-secret
0:
  spec:
    template:
      spec:
        containers:
          - image: '864899851722.dkr.ecr.eu-west-2.amazonaws.com/private/python-app:'
---
apiVersion: v1
kind: Service
metadata:
  name: python-app
spec:
  selector:
    app: python-app # Matches the pod's metadata.name
  ports:
    - protocol: TCP
      port: 5010 # External port (clients connect here)
      targetPort: 5010 # Port inside the container
  type: ClusterIP
0:
  spec:
    template:
      spec:
        containers:
          - image: '864899851722.dkr.ecr.eu-west-2.amazonaws.com/private/python-app:'
